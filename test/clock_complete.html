<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="x-icon" href="https://flashdragons.github.io/assets/icon.ico">
    <title>å¤šåŠŸèƒ½å®æ—¶æ—¶é’Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .clock-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            width: 100%;
            max-width: 800px;
        }
        
        .time-display {
            font-size: 5rem;
            font-weight: 300;
            color: white;
            margin: 20px 0;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            font-variant-numeric: tabular-nums; /* ç­‰å®½æ•°å­— */
        }
        
        .date-display {
            font-size: 1.8rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .control-btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .timezone-select {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 20px;
            backdrop-filter: blur(5px);
        }
        
        .timezone-select option {
            background: #333;
            color: white;
        }
        
        .format-info {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        @media (max-width: 600px) {
            .time-display {
                font-size: 3rem;
            }
            
            .date-display {
                font-size: 1.3rem;
            }
            
            .clock-container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="clock-container">
        <h1 style="color: white; margin-bottom: 20px;">ğŸ• æ™ºèƒ½å®æ—¶æ—¶é’Ÿ</h1>
        
        <div class="time-display" id="timeDisplay">00:00:00</div>
        <div class="date-display" id="dateDisplay">2024å¹´1æœˆ1æ—¥ æ˜ŸæœŸä¸€</div>
        
        <div class="controls">
            <button class="control-btn active" onclick="toggleFormat(12)">12å°æ—¶åˆ¶</button>
            <button class="control-btn" onclick="toggleFormat(24)">24å°æ—¶åˆ¶</button>
            <button class="control-btn" onclick="toggleSeconds()">æ˜¾ç¤º/éšè—ç§’</button>
            <button class="control-btn" onclick="toggleMilliseconds()">æ¯«ç§’æ¨¡å¼</button>
        </div>
        
        <select class="timezone-select" id="timezoneSelect" onchange="changeTimezone()">
            <option value="local">æœ¬åœ°æ—¶é—´</option>
            <option value="UTC">UTC æ—¶é—´</option>
            <option value="America/New_York">çº½çº¦æ—¶é—´</option>
            <option value="Europe/London">ä¼¦æ•¦æ—¶é—´</option>
            <option value="Asia/Tokyo">ä¸œäº¬æ—¶é—´</option>
            <option value="Asia/Shanghai">ä¸Šæµ·æ—¶é—´</option>
        </select>
        
        <div class="format-info" id="formatInfo">å½“å‰ä½¿ç”¨24å°æ—¶åˆ¶ï¼Œæ˜¾ç¤ºç§’é’ˆ</div>
    </div>

    <script>
        // é…ç½®å˜é‡
        let config = {
            format24: true,           // 24å°æ—¶åˆ¶
            showSeconds: true,        // æ˜¾ç¤ºç§’
            showMilliseconds: false,  // æ˜¾ç¤ºæ¯«ç§’
            timezone: 'local',        // æ—¶åŒº
            smooth: true              // å¹³æ»‘è¿‡æ¸¡
        };
        
        // åˆå§‹åŒ–
        function initClock() {
            updateClock();
            
            if (config.smooth) {
                // å¹³æ»‘åŠ¨ç”»æ›´æ–°
                requestAnimationFrame(smoothUpdate);
            } else {
                // æ™®é€šæ›´æ–°
                setInterval(updateClock, config.showMilliseconds ? 10 : 1000);
            }
            
            updateControls();
        }
        
        // æ›´æ–°æ—¶é’Ÿæ˜¾ç¤º
        function updateClock() {
            const now = new Date();
            let displayDate;
            
            // å¤„ç†æ—¶åŒº
            if (config.timezone === 'UTC') {
                displayDate = new Date(now.toUTCString().replace(' GMT', ''));
            } else if (config.timezone !== 'local') {
                // ä½¿ç”¨Intl APIå¤„ç†æ—¶åŒº
                displayDate = new Date(
                    now.toLocaleString('en-US', { timeZone: config.timezone })
                );
            } else {
                displayDate = now;
            }
            
            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            updateTimeDisplay(displayDate);
            
            // æ›´æ–°æ—¥æœŸæ˜¾ç¤º
            updateDateDisplay(displayDate);
        }
        
        // æ›´æ–°æ—¶é—´éƒ¨åˆ†
        function updateTimeDisplay(date) {
            let hours = date.getHours();
            let minutes = date.getMinutes();
            let seconds = date.getSeconds();
            let milliseconds = date.getMilliseconds();
            
            // å¤„ç†12å°æ—¶åˆ¶
            let ampm = '';
            if (!config.format24) {
                ampm = hours >= 12 ? ' PM' : ' AM';
                hours = hours % 12;
                hours = hours ? hours : 12; // 0ç‚¹è½¬ä¸º12ç‚¹
            }
            
            // æ ¼å¼åŒ–æ•°å­—
            hours = hours.toString().padStart(2, '0');
            minutes = minutes.toString().padStart(2, '0');
            seconds = seconds.toString().padStart(2, '0');
            milliseconds = milliseconds.toString().padStart(3, '0');
            
            // æ„å»ºæ—¶é—´å­—ç¬¦ä¸²
            let timeString;
            if (config.showMilliseconds) {
                timeString = `${hours}:${minutes}:${seconds}.${milliseconds}`;
            } else if (config.showSeconds) {
                timeString = `${hours}:${minutes}:${seconds}`;
            } else {
                timeString = `${hours}:${minutes}`;
            }
            
            timeString += ampm;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('timeDisplay').textContent = timeString;
        }
        
        // æ›´æ–°æ—¥æœŸéƒ¨åˆ†
        function updateDateDisplay(date) {
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            
            const dateString = date.toLocaleDateString('zh-CN', options);
            document.getElementById('dateDisplay').textContent = dateString;
        }
        
        // å¹³æ»‘æ›´æ–°ï¼ˆä½¿ç”¨requestAnimationFrameï¼‰
        let lastUpdateTime = 0;
        function smoothUpdate(timestamp) {
            if (!lastUpdateTime) lastUpdateTime = timestamp;
            
            const interval = config.showMilliseconds ? 10 : 1000;
            if (timestamp - lastUpdateTime >= interval) {
                updateClock();
                lastUpdateTime = timestamp - (timestamp % interval);
            }
            
            requestAnimationFrame(smoothUpdate);
        }
        
        // æ§åˆ¶å‡½æ•°
        function toggleFormat(format) {
            config.format24 = (format === 24);
            updateControls();
            updateFormatInfo();
        }
        
        function toggleSeconds() {
            config.showSeconds = !config.showSeconds;
            if (!config.showSeconds) {
                config.showMilliseconds = false;
            }
            updateControls();
            updateFormatInfo();
        }
        
        function toggleMilliseconds() {
            config.showMilliseconds = !config.showMilliseconds;
            if (config.showMilliseconds) {
                config.showSeconds = true;
            }
            updateControls();
            updateFormatInfo();
        }
        
        function changeTimezone() {
            config.timezone = document.getElementById('timezoneSelect').value;
            updateFormatInfo();
        }
        
        // æ›´æ–°æ§åˆ¶æŒ‰é’®çŠ¶æ€
        function updateControls() {
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ¿€æ´»å½“å‰é€‰ä¸­çš„æŒ‰é’®
            const formatBtn = config.format24 
                ? document.querySelector('button[onclick*="24"]')
                : document.querySelector('button[onclick*="12"]');
            formatBtn.classList.add('active');
            
            if (!config.showSeconds) {
                document.querySelector('button[onclick*="ç§’"]').textContent = 'æ˜¾ç¤ºç§’';
            } else {
                document.querySelector('button[onclick*="ç§’"]').textContent = 'éšè—ç§’';
                if (config.showMilliseconds) {
                    document.querySelector('button[onclick*="æ¯«ç§’"]').textContent = 'éšè—æ¯«ç§’';
                } else {
                    document.querySelector('button[onclick*="æ¯«ç§’"]').textContent = 'æ˜¾ç¤ºæ¯«ç§’';
                }
            }
        }
        
        // æ›´æ–°æ ¼å¼ä¿¡æ¯
        function updateFormatInfo() {
            let info = 'å½“å‰ä½¿ç”¨';
            info += config.format24 ? '24å°æ—¶åˆ¶' : '12å°æ—¶åˆ¶';
            info += config.showSeconds ? 'ï¼Œæ˜¾ç¤ºç§’' : 'ï¼Œä¸æ˜¾ç¤ºç§’';
            info += config.showMilliseconds ? 'ï¼Œæ˜¾ç¤ºæ¯«ç§’' : '';
            info += 'ï¼Œæ—¶åŒºï¼š' + getTimezoneName(config.timezone);
            
            document.getElementById('formatInfo').textContent = info;
        }
        
        function getTimezoneName(tz) {
            const names = {
                'local': 'æœ¬åœ°æ—¶é—´',
                'UTC': 'UTCæ—¶é—´',
                'America/New_York': 'çº½çº¦æ—¶é—´',
                'Europe/London': 'ä¼¦æ•¦æ—¶é—´',
                'Asia/Tokyo': 'ä¸œäº¬æ—¶é—´',
                'Asia/Shanghai': 'ä¸Šæµ·æ—¶é—´'
            };
            return names[tz] || tz;
        }
        
        // æ·»åŠ æ•°å­—æ—¶é’ŸåŠ¨ç”»
        function addDigitAnimation() {
            const timeDisplay = document.getElementById('timeDisplay');
            const observer = new MutationObserver(() => {
                timeDisplay.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    timeDisplay.style.transform = 'scale(1)';
                }, 100);
            });
            observer.observe(timeDisplay, { childList: true });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            initClock();
            addDigitAnimation();
            updateFormatInfo();
        });
        
        // æ·»åŠ é¡µé¢å¯è§æ€§ç›‘å¬ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // é¡µé¢éšè—æ—¶åœæ­¢æ›´æ–°
                if (window.clockInterval) {
                    clearInterval(window.clockInterval);
                }
            } else {
                // é¡µé¢æ˜¾ç¤ºæ—¶æ¢å¤æ›´æ–°
                initClock();
            }
        });
    </script>
</body>
</html>